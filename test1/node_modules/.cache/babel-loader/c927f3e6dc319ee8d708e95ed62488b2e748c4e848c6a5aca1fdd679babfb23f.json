{"ast":null,"code":"import jwtPrase from '@/assets/js/jwtPrase';\nexport default {\n  name: \"DialogTutorInfo\",\n  props: [\"formType\", \"tId\", 'dialogVisible'],\n  emits: ['closeDialog'],\n  data() {\n    return {\n      visible: false,\n      title: '',\n      infoDetail: {\n        id: '',\n        tid: '',\n        tutorName: \"\",\n        title: '',\n        gender: \"\",\n        password: \"\",\n        college: \"\",\n        major: \"\",\n        phone: \"\",\n        email: \"\",\n        office: \"\",\n        updatedBy: \"\"\n      },\n      genderList: [],\n      collegeList: [],\n      majorList: [],\n      titleList: [],\n      rules: {\n        tid: [{\n          required: true,\n          message: '工号不能为空',\n          trigger: 'blur'\n        }],\n        tutorName: [{\n          required: true,\n          message: '导师姓名不能为空',\n          trigger: 'blur'\n        }],\n        title: [{\n          required: true,\n          message: '请选择导师职称',\n          trigger: 'change'\n        }],\n        gender: [{\n          required: true,\n          message: '请选择导师性别',\n          trigger: 'change'\n        }],\n        password: [{\n          required: true,\n          message: '密码不能为空',\n          trigger: 'blur'\n        }],\n        college: [{\n          required: true,\n          message: '请选择学院',\n          trigger: 'change'\n        }],\n        major: [{\n          required: true,\n          message: '请选择专业名称',\n          trigger: 'change'\n        }],\n        phone: [{\n          required: true,\n          message: '请输入手机号',\n          trigger: 'blur'\n        }, {\n          min: 11,\n          max: 11,\n          message: '手机号长度为11位',\n          trigger: 'blur'\n        }],\n        email: [{\n          required: true,\n          message: '请输入邮箱账号',\n          trigger: 'blur'\n        }],\n        office: [{\n          required: true,\n          message: '请输入导师办公室',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  methods: {\n    submitForm(formName) {\n      this.$refs[formName].validate(valid => {\n        if (valid) {\n          if (this.formType == '0') {\n            // 发送新增请求\n            this.addUser();\n          } else if (this.formType == '1') {\n            // 发送修改请求\n          }\n        } else {\n          return false;\n        }\n      });\n    },\n    // 关闭dialog\n    closeDialogEmit() {\n      this.visible = false;\n      this.$emit('closeDialog', this.visible);\n    },\n    //发送请求获取collegeList\n    async getCollegeList() {\n      const resp = await this.$http.get('/dict/college');\n      if (resp.data.code === 200) {\n        this.collegeList = resp.data.data;\n      }\n    },\n    //发送请求获取genderList\n    async getGenderList() {\n      const resp = await this.$http.get('/dict/gender');\n      if (resp.data.code === 200) {\n        this.genderList = resp.data.data;\n      }\n    },\n    //发送请求获取majorList\n    async getMajorList(id) {\n      const resp = await this.$http.get('/dict/major/' + id);\n      if (resp.data.code === 200) {\n        this.majorList = resp.data.data;\n      }\n    },\n    //发送请求获取titleList\n    async getTitleList() {\n      const resp = await this.$http.get('/dict/tutorTitle');\n      if (resp.data.code === 200) {\n        this.titleList = resp.data.data;\n      }\n    },\n    //发送请求 新增导师\n    async addUser() {\n      //设置更新者的id\n      this.infoDetail.updatedBy = jwtPrase().id;\n      const resp = await this.$http({\n        url: '/userTutor',\n        method: \"post\",\n        data: this.infoDetail\n      });\n      if (resp.data.code === 200) {\n        if (resp.data.data == true) {\n          this.$message.success(resp.data.msg);\n        } else {\n          this.$message.error(resp.data.msg);\n        }\n      }\n    },\n    async getUserByTid() {\n      const resp = await this.$http.get(\"/userTutor/\" + this.tId);\n      if (resp.data.code === 200) {\n        this.infoDetail = resp.data.data;\n        console.log(this.infoDetail);\n      }\n    }\n  },\n  watch: {\n    dialogVisible(newval) {\n      this.visible = newval;\n    },\n    'infoDetail.college'(newval) {\n      if (newval == '') {\n        return;\n      }\n      //根据newval发送请求获取majorList\n      this.getMajorList(newval);\n    }\n  },\n  updated() {\n    if (this.formType === '1') {\n      this.title = '修改导师信息';\n      //使用sId发送请求，获取sId对应导师的全部信息\n      //发送请求 获取用户原信息\n      this.getUserByTid();\n    } else {\n      this.title = '新增导师信息';\n    }\n  },\n  created() {\n    //发送请求获取genderList\n    this.getGenderList();\n    //发送请求获取collegeList\n    this.getCollegeList();\n    //发送请求获取titleList\n    this.getTitleList();\n  }\n};","map":{"version":3,"mappings":"AAyEA;AAEA;EACAA;EACAC;EACAC;EACAC;IACA;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;QACAJ;QACAK;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;MACAC;MAEAC;QACAd,MACA;UAAAe;UAAAC;UAAAC;QAAA,EACA;QACAhB,YACA;UAAAc;UAAAC;UAAAC;QAAA,EACA;QACApB,QACA;UAAAkB;UAAAC;UAAAC;QAAA,EACA;QACAf,SACA;UAAAa;UAAAC;UAAAC;QAAA,EACA;QACAd,WACA;UAAAY;UAAAC;UAAAC;QAAA,EACA;QACAb,UACA;UAAAW;UAAAC;UAAAC;QAAA,EACA;QACAZ,QACA;UAAAU;UAAAC;UAAAC;QAAA,EACA;QACAX,QACA;UAAAS;UAAAC;UAAAC;QAAA,GACA;UAAAC;UAAAC;UAAAH;UAAAC;QAAA,EACA;QACAV,QACA;UAAAQ;UAAAC;UAAAC;QAAA,EACA;QACAT,SACA;UAAAO;UAAAC;UAAAC;QAAA;MAGA;IACA;EACA;EACAG;IACAC;MACA;QACA;UACA;YACA;YACA;UACA;YACA;UAAA;QAGA;UACA;QACA;MACA;IACA;IACA;IACAC;MACA;MACA;IACA;IACA;IACA;MACA;MACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;QACA;MACA;IACA;IACA;IACA;MACA;MACA;QACA;MACA;IACA;IACA;IACA;MAEA;MACA;MAEA;QACAC;QACAC;QACA7B;MACA;MACA;QACA;UACA;QAEA;UACA;QACA;MACA;IACA;IACA;MACA;MAEA;QAEA;QACA8B;MACA;IAGA;EACA;EACAC;IACAC;MACA;IACA;IACA;MACA;QACA;MACA;MACA;MACA;IACA;EACA;EACAC;IAEA;MACA;MACA;MACA;MACA;IACA;MACA;IAEA;EAEA;EACAC;IACA;IACA;IACA;IACA;IACA;IACA;EAGA;AAEA","names":["name","props","emits","data","visible","title","infoDetail","id","tid","tutorName","gender","password","college","major","phone","email","office","updatedBy","genderList","collegeList","majorList","titleList","rules","required","message","trigger","min","max","methods","submitForm","closeDialogEmit","url","method","console","watch","dialogVisible","updated","created"],"sourceRoot":"src/components/home/admin","sources":["DialogTutorInfo.vue"],"sourcesContent":["<template>\r\n    <el-dialog :title=\"title\" :visible.sync=\"visible\" width=\"800px\" @close=\"closeDialogEmit\">\r\n\r\n        <el-form ref=\"infoForm\" :rules=\"rules\" :model=\"infoDetail\" label-width=\"120px\" class=\"box-form\">\r\n            <el-form-item label=\"工号\" prop=\"tid\">\r\n                <el-input v-model.trim=\"infoDetail.tid\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"导师姓名\" prop=\"tutorName\">\r\n                <el-input v-model.trim=\"infoDetail.tutorName\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"导师职称\" prop=\"title\">\r\n                <el-select v-model.trim=\"infoDetail.title\" placeholder=\"请选择导师职称\">\r\n                    <el-option v-for=\"item in titleList\" :key=\"item.title\" :label=\"item.description\"\r\n                        :value=\"item.title\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"性别\" prop=\"gender\">\r\n                <el-select v-model.trim=\"infoDetail.gender\" placeholder=\"请选择性别\">\r\n                    <el-option v-for=\"item in genderList\" :key=\"item.gender\" :label=\"item.description\"\r\n                        :value=\"item.gender\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n\r\n            <el-form-item label=\"所属学院\" prop=\"college\">\r\n                <el-select v-model.trim=\"infoDetail.college\" placeholder=\"请选择学院\">\r\n                    <el-option v-for=\"item in collegeList\" :key=\"item.collegeId\" :label=\"item.description\"\r\n                        :value=\"item.collegeId\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"所属系\" prop=\"major\">\r\n                <el-select v-model.trim=\"infoDetail.major\" placeholder=\"请选择系\">\r\n                    <el-option v-for=\"item in majorList\" :key=\"item.majorId\" :label=\"item.description + '系'\"\r\n                        :value=\"item.majorId\">\r\n                    </el-option>\r\n                </el-select>\r\n            </el-form-item>\r\n            <el-form-item label=\"密码\" prop=\"password\">\r\n                <el-input v-model.trim=\"infoDetail.password\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"手机号\" prop=\"phone\">\r\n                <el-input v-model.trim=\"infoDetail.phone\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"邮箱\" prop=\"email\">\r\n                <el-input v-model.trim=\"infoDetail.email\"></el-input>\r\n            </el-form-item>\r\n            <el-form-item label=\"导师办公室\" prop=\"office\">\r\n                <el-input v-model.trim=\"infoDetail.office\"></el-input>\r\n            </el-form-item>\r\n\r\n\r\n            <el-form-item>\r\n                <el-row>\r\n                    <el-button plain type=\"primary\" class=\"info_btns\" v-if=\"formType === '0'\"\r\n                        @click=\"submitForm('infoForm')\">新增导师信息\r\n                    </el-button>\r\n\r\n                    <el-button plain type=\"primary\" class=\"info_btns\" v-else @click=\"submitForm('infoForm')\">修改导师信息\r\n                    </el-button>\r\n\r\n                    <el-button plain type=\"danger\" class=\"info_btns\" @click=\"closeDialogEmit\">取消</el-button>\r\n\r\n                </el-row>\r\n\r\n            </el-form-item>\r\n        </el-form>\r\n    </el-dialog>\r\n\r\n</template>\r\n\r\n<script>\r\nimport jwtPrase from '@/assets/js/jwtPrase';\r\n\r\nexport default {\r\n    name: \"DialogTutorInfo\",\r\n    props: [\"formType\", \"tId\", 'dialogVisible'],\r\n    emits: ['closeDialog'],\r\n    data() {\r\n        return {\r\n            visible: false,\r\n            title: '',\r\n            infoDetail: {\r\n                id: '',\r\n                tid: '',\r\n                tutorName: \"\",\r\n                title: '',\r\n                gender: \"\",\r\n                password: \"\",\r\n                college: \"\",\r\n                major: \"\",\r\n                phone: \"\",\r\n                email: \"\",\r\n                office: \"\",\r\n                updatedBy: \"\"\r\n            },\r\n            genderList: [],\r\n            collegeList: [],\r\n            majorList: [],\r\n            titleList: [],\r\n\r\n            rules: {\r\n                tid: [\r\n                    { required: true, message: '工号不能为空', trigger: 'blur' },\r\n                ],\r\n                tutorName: [\r\n                    { required: true, message: '导师姓名不能为空', trigger: 'blur' },\r\n                ],\r\n                title: [\r\n                    { required: true, message: '请选择导师职称', trigger: 'change' },\r\n                ],\r\n                gender: [\r\n                    { required: true, message: '请选择导师性别', trigger: 'change' },\r\n                ],\r\n                password: [\r\n                    { required: true, message: '密码不能为空', trigger: 'blur' },\r\n                ],\r\n                college: [\r\n                    { required: true, message: '请选择学院', trigger: 'change' },\r\n                ],\r\n                major: [\r\n                    { required: true, message: '请选择专业名称', trigger: 'change' },\r\n                ],\r\n                phone: [\r\n                    { required: true, message: '请输入手机号', trigger: 'blur' },\r\n                    { min: 11, max: 11, message: '手机号长度为11位', trigger: 'blur' }\r\n                ],\r\n                email: [\r\n                    { required: true, message: '请输入邮箱账号', trigger: 'blur' },\r\n                ],\r\n                office: [\r\n                    { required: true, message: '请输入导师办公室', trigger: 'blur' },\r\n                ],\r\n\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        submitForm(formName) {\r\n            this.$refs[formName].validate((valid) => {\r\n                if (valid) {\r\n                    if (this.formType == '0') {\r\n                        // 发送新增请求\r\n                        this.addUser()\r\n                    } else if (this.formType == '1') {\r\n                        // 发送修改请求\r\n                    }\r\n\r\n                } else {\r\n                    return false;\r\n                }\r\n            });\r\n        },\r\n        // 关闭dialog\r\n        closeDialogEmit() {\r\n            this.visible = false\r\n            this.$emit('closeDialog', this.visible)\r\n        },\r\n        //发送请求获取collegeList\r\n        async getCollegeList() {\r\n            const resp = await this.$http.get('/dict/college')\r\n            if (resp.data.code === 200) {\r\n                this.collegeList = resp.data.data\r\n            }\r\n        },\r\n        //发送请求获取genderList\r\n        async getGenderList() {\r\n            const resp = await this.$http.get('/dict/gender')\r\n            if (resp.data.code === 200) {\r\n                this.genderList = resp.data.data\r\n            }\r\n        },\r\n        //发送请求获取majorList\r\n        async getMajorList(id) {\r\n            const resp = await this.$http.get('/dict/major/' + id)\r\n            if (resp.data.code === 200) {\r\n                this.majorList = resp.data.data\r\n            }\r\n        },\r\n        //发送请求获取titleList\r\n        async getTitleList() {\r\n            const resp = await this.$http.get('/dict/tutorTitle')\r\n            if (resp.data.code === 200) {\r\n                this.titleList = resp.data.data\r\n            }\r\n        },\r\n        //发送请求 新增导师\r\n        async addUser() {\r\n\r\n            //设置更新者的id\r\n            this.infoDetail.updatedBy = jwtPrase().id\r\n\r\n            const resp = await this.$http({\r\n                url: '/userTutor',\r\n                method: \"post\",\r\n                data: this.infoDetail\r\n            })\r\n            if (resp.data.code === 200) {\r\n                if (resp.data.data == true) {\r\n                    this.$message.success(resp.data.msg)\r\n\r\n                } else {\r\n                    this.$message.error(resp.data.msg)\r\n                }\r\n            }\r\n        },\r\n        async getUserByTid() {\r\n            const resp = await this.$http.get(\"/userTutor/\" + this.tId)\r\n\r\n            if (resp.data.code===200) {\r\n\r\n                this.infoDetail=resp.data.data\r\n                console.log(this.infoDetail);\r\n            }\r\n\r\n\r\n        }\r\n    },\r\n    watch: {\r\n        dialogVisible(newval) {\r\n            this.visible = newval\r\n        },\r\n        'infoDetail.college'(newval) {\r\n            if (newval == '') {\r\n                return;\r\n            }\r\n            //根据newval发送请求获取majorList\r\n            this.getMajorList(newval)\r\n        }\r\n    },\r\n    updated() {\r\n\r\n        if (this.formType === '1') {\r\n            this.title = '修改导师信息'\r\n            //使用sId发送请求，获取sId对应导师的全部信息\r\n            //发送请求 获取用户原信息\r\n            this.getUserByTid()\r\n        } else {\r\n            this.title = '新增导师信息'\r\n\r\n        }\r\n\r\n    },\r\n    created() {\r\n        //发送请求获取genderList\r\n        this.getGenderList()\r\n        //发送请求获取collegeList\r\n        this.getCollegeList()\r\n        //发送请求获取titleList\r\n        this.getTitleList()\r\n\r\n\r\n    }\r\n\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n.info_btns {\r\n    margin-top: 30px;\r\n    margin-left: 110px;\r\n    width: 150px;\r\n    font-size: 18px;\r\n}\r\n\r\n.box-form {\r\n    line-height: 23px;\r\n    font-size: 22px;\r\n    text-align: left;\r\n    height: 720px;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}