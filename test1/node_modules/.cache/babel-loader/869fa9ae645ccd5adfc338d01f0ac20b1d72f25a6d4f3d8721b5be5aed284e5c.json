{"ast":null,"code":"import \"core-js/modules/web.dom-exception.stack.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport Vue from 'vue';\nimport App from './App.vue';\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport router from '@/router';\nimport axios from 'axios';\nimport Detail from '@/components/home/shared/Detail.vue';\nimport UserMsg from '@/components/home/shared/UserMsg.vue';\nimport { Date } from 'core-js';\n\n// axios配置\naxios.defaults.baseURL = \"http://localhost:9000\";\naxios.interceptors.request.use(config => {\n  //jwt\n  const jwt = localStorage.getItem(\"jwt\");\n  if (jwt !== null) {\n    //解码jwt\n    let jwt_payload_arr = jwt.split('.');\n    let payload = window.atob(jwt_payload_arr[1]);\n    let payloadJson = JSON.parse(payload);\n    if (payloadJson.exp < Date.now()) {\n      console.log(payloadJson.exp);\n      console.log(Date.now());\n      //jwt过期\n      //删除本地jwt\n      localStorage.removeItem(\"jwt\");\n      //跳转到登录页面\n      app.$message({\n        message: \"身份认证过期！请重新登录\",\n        type: 'danger'\n      });\n      app.$router.push('/login');\n    }\n\n    //为请求头设置jwt\n    config.headers.Authentication = jwt;\n  }\n  return config;\n});\nVue.prototype.$http = axios;\n\n//引入插件\nVue.use(ElementUI);\n\n//全局注册组件\nVue.component(\"Detail\", Detail);\nVue.component(\"UserMsg\", UserMsg);\nVue.config.productionTip = false;\nconst app = new Vue({\n  render: h => h(App),\n  router\n});\napp.$mount('#app');","map":{"version":3,"names":["Vue","App","ElementUI","router","axios","Detail","UserMsg","Date","defaults","baseURL","interceptors","request","use","config","jwt","localStorage","getItem","jwt_payload_arr","split","payload","window","atob","payloadJson","JSON","parse","exp","now","console","log","removeItem","app","$message","message","type","$router","push","headers","Authentication","prototype","$http","component","productionTip","render","h","$mount"],"sources":["C:/Users/zzz06/Desktop/topic/test1/src/main.js"],"sourcesContent":["import Vue from 'vue'\nimport App from './App.vue'\n\nimport ElementUI from 'element-ui';\nimport 'element-ui/lib/theme-chalk/index.css';\nimport router from '@/router';\nimport axios from 'axios';\nimport Detail from '@/components/home/shared/Detail.vue';\nimport UserMsg from '@/components/home/shared/UserMsg.vue';\nimport { Date } from 'core-js';\n\n// axios配置\naxios.defaults.baseURL = \"http://localhost:9000\"\naxios.interceptors.request.use(config => {\n  //jwt\n  const jwt = localStorage.getItem(\"jwt\")\n\n  if (jwt !== null) {\n\n    //解码jwt\n    let jwt_payload_arr = jwt.split('.')\n    let payload = window.atob(jwt_payload_arr[1])\n    let payloadJson = JSON.parse(payload)\n\n    if (payloadJson.exp < Date.now()) {\n      console.log(payloadJson.exp)\n      console.log(Date.now());\n      //jwt过期\n      //删除本地jwt\n      localStorage.removeItem(\"jwt\")\n      //跳转到登录页面\n      app.$message({\n        message: \"身份认证过期！请重新登录\",\n        type: 'danger'\n      })\n      app.$router.push('/login')\n\n    }\n\n    //为请求头设置jwt\n    config.headers.Authentication = jwt\n\n  }\n\n\n  return config\n})\nVue.prototype.$http = axios\n\n//引入插件\nVue.use(ElementUI);\n\n//全局注册组件\nVue.component(\"Detail\", Detail);\nVue.component(\"UserMsg\", UserMsg);\n\nVue.config.productionTip = false\n\nconst app = new Vue({\n  render: h => h(App),\n  router,\n})\n\n\n\napp.$mount('#app')\n"],"mappings":";;AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,OAAOC,GAAG,MAAM,WAAW;AAE3B,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAO,sCAAsC;AAC7C,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,OAAO;AACzB,OAAOC,MAAM,MAAM,qCAAqC;AACxD,OAAOC,OAAO,MAAM,sCAAsC;AAC1D,SAASC,IAAI,QAAQ,SAAS;;AAE9B;AACAH,KAAK,CAACI,QAAQ,CAACC,OAAO,GAAG,uBAAuB;AAChDL,KAAK,CAACM,YAAY,CAACC,OAAO,CAACC,GAAG,CAACC,MAAM,IAAI;EACvC;EACA,MAAMC,GAAG,GAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC;EAEvC,IAAIF,GAAG,KAAK,IAAI,EAAE;IAEhB;IACA,IAAIG,eAAe,GAAGH,GAAG,CAACI,KAAK,CAAC,GAAG,CAAC;IACpC,IAAIC,OAAO,GAAGC,MAAM,CAACC,IAAI,CAACJ,eAAe,CAAC,CAAC,CAAC,CAAC;IAC7C,IAAIK,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACL,OAAO,CAAC;IAErC,IAAIG,WAAW,CAACG,GAAG,GAAGlB,IAAI,CAACmB,GAAG,EAAE,EAAE;MAChCC,OAAO,CAACC,GAAG,CAACN,WAAW,CAACG,GAAG,CAAC;MAC5BE,OAAO,CAACC,GAAG,CAACrB,IAAI,CAACmB,GAAG,EAAE,CAAC;MACvB;MACA;MACAX,YAAY,CAACc,UAAU,CAAC,KAAK,CAAC;MAC9B;MACAC,GAAG,CAACC,QAAQ,CAAC;QACXC,OAAO,EAAE,cAAc;QACvBC,IAAI,EAAE;MACR,CAAC,CAAC;MACFH,GAAG,CAACI,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;IAE5B;;IAEA;IACAtB,MAAM,CAACuB,OAAO,CAACC,cAAc,GAAGvB,GAAG;EAErC;EAGA,OAAOD,MAAM;AACf,CAAC,CAAC;AACFb,GAAG,CAACsC,SAAS,CAACC,KAAK,GAAGnC,KAAK;;AAE3B;AACAJ,GAAG,CAACY,GAAG,CAACV,SAAS,CAAC;;AAElB;AACAF,GAAG,CAACwC,SAAS,CAAC,QAAQ,EAAEnC,MAAM,CAAC;AAC/BL,GAAG,CAACwC,SAAS,CAAC,SAAS,EAAElC,OAAO,CAAC;AAEjCN,GAAG,CAACa,MAAM,CAAC4B,aAAa,GAAG,KAAK;AAEhC,MAAMX,GAAG,GAAG,IAAI9B,GAAG,CAAC;EAClB0C,MAAM,EAAEC,CAAC,IAAIA,CAAC,CAAC1C,GAAG,CAAC;EACnBE;AACF,CAAC,CAAC;AAIF2B,GAAG,CAACc,MAAM,CAAC,MAAM,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}