{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  name: \"TaskPublish\",\n  data() {\n    return {\n      taskList: [],\n      historyTaskList: [],\n      dialogVisible: false,\n      collegeList: '',\n      majorList: '',\n      taskForm: {\n        name: '',\n        year: '',\n        college: '',\n        major: '',\n        startTime: '',\n        duration: '',\n        publishBy: ''\n      }\n    };\n  },\n  methods: {\n    //显示dialog\n    openDialog() {\n      this.dialogVisible = true;\n    },\n    //新增任务\n    addTask() {\n      this.dialogVisible = false;\n    },\n    //取消提交\n    cancelSubmit() {\n      this.dialogVisible = false;\n    },\n    //删除任务\n    cancelTask(row) {\n      console.log(row);\n      this.$confirm('此操作将永久删除该任务: ' + row.name + ' , 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(() => {\n        //发送请求，删除row.id 对应的任务\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n  },\n  created() {\n    //获取任务列表\n    this.taskList = [];\n    for (let index = 0; index < 150; index++) {\n      this.taskList.push({\n        id: index,\n        name: '任务名称' + index,\n        year: 3022,\n        college: \"xxx学院\",\n        major: '计算机科学与技术',\n        startTime: new Date().toLocaleString(),\n        duration: 30,\n        status: '未开始',\n        publishBy: '江婷'\n      });\n    }\n    //获取历史任务列表\n    this.historyTaskList = [];\n    for (let index = 0; index < 17; index++) {\n      this.historyTaskList.push({\n        id: index,\n        name: '任务名称' + index,\n        year: 3022,\n        college: \"xxx学院\",\n        major: '计算机科学与技术',\n        startTime: new Date().toLocaleString(),\n        duration: 30,\n        status: '已完成',\n        publishBy: '江婷'\n      });\n    }\n\n    //发送请求获取collegeList\n    this.collegeList = [{\n      college_id: '01',\n      description: '信息与通信工程学院'\n    }, {\n      college_id: '02',\n      description: '土木学院'\n    }, {\n      college_id: '03',\n      description: '艺术学院'\n    }];\n  },\n  watch: {\n    'taskForm.college'(newVal) {\n      console.log(newVal);\n      //根据college获取majorList\n      this.majorList = [{\n        major_id: '0101',\n        description: '计算机科学与技术'\n      }, {\n        major_id: '0102',\n        description: '软件工程'\n      }, {\n        major_id: '0103',\n        description: '通信工程'\n      }];\n    }\n  }\n};","map":{"version":3,"mappings":";AAqGA;EACAA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAP;QACAQ;QACAC;QACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACA;IACA;IACA;IACAC;MACA;IACA;IAEA;IACAC;MACAC;MACA;QACAC;QACAC;QACAC;MACA;QACA;QACA;UACAA;UACAC;QACA;MACA;QACA;UACAD;UACAC;QACA;MACA;IAEA;EACA;EACAC;IACA;IACA;IACA;MACA;QACAC;QACAzB;QACAQ;QACAC;QACAC;QACAC;QACAC;QACAc;QACAb;MACA;IAEA;IACA;IACA;IACA;MACA;QACAY;QACAzB;QACAQ;QACAC;QACAC;QACAC;QACAC;QACAc;QACAb;MACA;IAEA;;IAEA;IACA,oBACA;MAAAc;MAAAC;IAAA,GACA;MAAAD;MAAAC;IAAA,GACA;MAAAD;MAAAC;IAAA,EACA;EACA;EACAC;IACA;MACAV;MACA;MACA,kBACA;QAAAW;QAAAF;MAAA,GACA;QAAAE;QAAAF;MAAA,GACA;QAAAE;QAAAF;MAAA,EACA;IACA;EACA;AACA","names":["name","data","taskList","historyTaskList","dialogVisible","collegeList","majorList","taskForm","year","college","major","startTime","duration","publishBy","methods","openDialog","addTask","cancelSubmit","cancelTask","console","confirmButtonText","cancelButtonText","type","message","created","id","status","college_id","description","watch","major_id"],"sourceRoot":"src/components/home/admin","sources":["TaskPublish.vue"],"sourcesContent":["<template>\r\n    <el-card class=\"box-card\">\r\n        <div slot=\"header\">\r\n            <el-row>\r\n                <el-col :span=\"12\">\r\n                    <div>选题任务发布</div>\r\n                </el-col>\r\n                <el-col :span=\"12\">\r\n                    <div class=\"header_btn\">\r\n                        <el-button plain type=\"primary\" @click=\"openDialog\">新增选题任务</el-button>\r\n                    </div>\r\n                </el-col>\r\n            </el-row>\r\n            <span></span>\r\n        </div>\r\n        <div class=\"item\">\r\n            <el-table :data=\"taskList\" style=\"width: 100%;margin-bottom:30px\" height=\"311\">\r\n                <el-table-column type=\"index\" prop=\"id\" align=\"center\" width=\"70\"></el-table-column>\r\n                <el-table-column prop=\"name\" align=\"center\" label=\"当前任务名称\" width=\"180\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"year\" align=\"center\" label=\"届数\" width=\"180\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"college\" align=\"center\" label=\"学院\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"major\" align=\"center\" label=\"专业\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"startTime\" align=\"center\" label=\"开始时间\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"duration\" align=\"center\" label=\"任务时长（分钟）\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"status\" align=\"center\" label=\"任务状态\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"publishBy\" align=\"center\" label=\"任务发布人\">\r\n                </el-table-column>\r\n                <el-table-column>\r\n                    <template slot-scope=\"scope\">\r\n                        <el-button plain type=\"danger\" @click=\"cancelTask(scope.row)\">取消任务</el-button>\r\n                    </template>\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-table :data=\"historyTaskList\" style=\"width: 100%\" height=\"339\">\r\n                <el-table-column type=\"index\" align=\"center\" width=\"70\"></el-table-column>\r\n                <el-table-column prop=\"name\" align=\"center\" label=\"历史任务名称\" width=\"180\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"year\" align=\"center\" label=\"届数\" width=\"180\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"college\" align=\"center\" label=\"学院\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"major\" align=\"center\" label=\"专业\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"startTime\" align=\"center\" label=\"开始时间\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"duration\" align=\"center\" label=\"任务时长（分钟）\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"status\" align=\"center\" label=\"任务状态\">\r\n                </el-table-column>\r\n                <el-table-column prop=\"publishBy\" align=\"center\" label=\"任务发布人\">\r\n                </el-table-column>\r\n            </el-table>\r\n            <el-dialog title=\"新增选题任务\" :visible.sync=\"dialogVisible\" width=\"600px\">\r\n                <el-form :model=\"taskForm\" label-position=\"left\" label-width=\"120px\">\r\n                    <el-form-item label=\"任务名称\">\r\n                        <el-input v-model=\"taskForm.name\" autocomplete=\"off\" maxlength=\"100px\"></el-input>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"届数\">\r\n                        <el-date-picker v-model=\"taskForm.year\" type=\"year\" placeholder=\"选择届数\">\r\n                        </el-date-picker>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"学院\">\r\n                        <el-select v-model=\"taskForm.college\" placeholder=\"请选择学院\">\r\n                            <el-option v-for=\"item in collegeList\" :label=\"item.description\" :value=\"item.college\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"专业\">\r\n                        <el-select v-model=\"taskForm.major\" placeholder=\"请选择专业\">\r\n                            <el-option v-for=\"item in majorList\" :label=\"item.description\" :value=\"item.major\"></el-option>\r\n                        </el-select>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"任务开始时间\">\r\n                        <el-date-picker\r\n                        v-model=\"taskForm.startTime\"\r\n                        type=\"datetime\"\r\n                        placeholder=\"选择任务开始时间\">\r\n                      </el-date-picker>\r\n                    </el-form-item>\r\n                    <el-form-item label=\"选课时长(分钟)\">\r\n                        <el-input-number v-model=\"taskForm.duration\"  :min=\"1\"  label=\"描述文字\"></el-input-number>\r\n                    </el-form-item>\r\n                </el-form>\r\n\r\n                <div slot=\"footer\" class=\"dialog-footer\">\r\n                    <el-button @click=\"cancelSubmit\">取 消</el-button>\r\n                    <el-button type=\"primary\" @click=\"addTask\">确 定</el-button>\r\n                </div>\r\n            </el-dialog>\r\n        </div>\r\n\r\n\r\n    </el-card>\r\n</template>\r\n<script>\r\nexport default {\r\n    name: \"TaskPublish\",\r\n    data() {\r\n        return {\r\n            taskList: [],\r\n            historyTaskList: [],\r\n            dialogVisible: false,\r\n            collegeList: '',\r\n            majorList: '',\r\n            taskForm: {\r\n                name: '',\r\n                year: '',\r\n                college: '',\r\n                major: '',\r\n                startTime: '',\r\n                duration: '',\r\n                publishBy: ''\r\n            }\r\n        }\r\n    },\r\n    methods: {\r\n        //显示dialog\r\n        openDialog() {\r\n            this.dialogVisible = true\r\n        },\r\n\r\n        //新增任务\r\n        addTask() {\r\n            this.dialogVisible = false\r\n        },\r\n        //取消提交\r\n        cancelSubmit() {\r\n            this.dialogVisible = false\r\n        },\r\n\r\n        //删除任务\r\n        cancelTask(row) {\r\n            console.log(row);\r\n            this.$confirm('此操作将永久删除该任务: ' + row.name + ' , 是否继续?', '提示', {\r\n                confirmButtonText: '确定',\r\n                cancelButtonText: '取消',\r\n                type: 'warning'\r\n            }).then(() => {\r\n                //发送请求，删除row.id 对应的任务\r\n                this.$message({\r\n                    type: 'success',\r\n                    message: '删除成功!'\r\n                });\r\n            }).catch(() => {\r\n                this.$message({\r\n                    type: 'info',\r\n                    message: '已取消删除'\r\n                });\r\n            });\r\n\r\n        }\r\n    },\r\n    created() {\r\n        //获取任务列表\r\n        this.taskList = []\r\n        for (let index = 0; index < 150; index++) {\r\n            this.taskList.push({\r\n                id: index,\r\n                name: '任务名称' + index,\r\n                year: 3022,\r\n                college: \"xxx学院\",\r\n                major: '计算机科学与技术',\r\n                startTime: new Date().toLocaleString(),\r\n                duration: 30,\r\n                status: '未开始',\r\n                publishBy: '江婷'\r\n            })\r\n\r\n        }\r\n        //获取历史任务列表\r\n        this.historyTaskList = []\r\n        for (let index = 0; index < 17; index++) {\r\n            this.historyTaskList.push({\r\n                id: index,\r\n                name: '任务名称' + index,\r\n                year: 3022,\r\n                college: \"xxx学院\",\r\n                major: '计算机科学与技术',\r\n                startTime: new Date().toLocaleString(),\r\n                duration: 30,\r\n                status: '已完成',\r\n                publishBy: '江婷'\r\n            })\r\n\r\n        }\r\n\r\n        //发送请求获取collegeList\r\n        this.collegeList = [\r\n            { college_id: '01', description: '信息与通信工程学院' },\r\n            { college_id: '02', description: '土木学院' },\r\n            { college_id: '03', description: '艺术学院' },\r\n        ]\r\n    },\r\n    watch:{\r\n        'taskForm.college'(newVal){\r\n            console.log(newVal);\r\n            //根据college获取majorList\r\n            this.majorList=[\r\n                { major_id: '0101', description: '计算机科学与技术' },\r\n                { major_id: '0102', description: '软件工程' },\r\n                { major_id: '0103', description: '通信工程' },\r\n            ]\r\n        }\r\n    }\r\n}\r\n</script>\r\n<style scoped lang=\"less\">\r\n\r\n\r\n.header_btn {\r\n    float: right;\r\n}\r\n/deep/.el-input__inner {\r\n    width: 300px;\r\n}\r\n.box-card {\r\n    text-align: left;\r\n    line-height: 24px;\r\n    font-size: 18px;\r\n    height: 818px;\r\n    background-color: rgba(255, 255, 255, 0.9);\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}